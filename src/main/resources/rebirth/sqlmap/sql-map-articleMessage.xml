<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap        
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"        
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
 <sqlMap>
 	
 	<typeAlias alias="articleBasic" type="com.model.Article" />
	
	<resultMap id="articleBasic" class="articleBasic">
		<result property="id" column="id"/>
    	<result property="articleName" column="article_name"/>
		<result property="articleCreateTime" column="article_create_time"/>
        <result property="articleContent" column="article_content"/>
		<result property="articleShortContent" column="article_short_content"/>
		<result property="articleCommentId" column="article_comment_id"/>
		<result property="articleSortId" column="article_field_id"/>
    </resultMap>
 	
 	<select id="findArticleMessageByArticleName" parameterClass="String" resultMap="articleBasic">
 		
 		<![CDATA[
 			select article_name,article_create_time,article_short_content,article_content,article_comment_id,article_sort_id
			from rebirth.article_message
			where article_name like '%'||#name#||'%'
			or article_content like '%'||#name#||'%'
 		]]>
 		
 	</select>
 	
 	<select id="findArticleMessageWithPage" parameterClass="map" resultMap="articleBasic">
 		
 		<![CDATA[
 			select id,article_name,article_create_time,article_short_content,article_content,article_comment_id,article_field_id
			from rebirth.article_message
			where is_deleted = 0
			order by update_time desc
			limit #start#,#end#
 		]]>
 		
 	</select>
 	
 	<select id="findArticleMessageWithId" parameterClass="map" resultMap="articleBasic">
 		
 		<![CDATA[
 			select id,article_name,article_create_time,article_short_content,article_content,article_comment_id,article_field_id
			from rebirth.article_message
			where is_deleted = 0
			and id = #id#
 		]]>
 		
 	</select>
 	
 	<insert id="insertNewArticle" parameterClass="map" >
 			insert into rebirth.article_message
 			(article_name,
 			 article_short_content,
 			 article_content,
 			 article_field_id,
 			 article_create_time,
 			 create_time,
 			 update_time,
 			 version)
 			VALUES 
 			(#articleName#,
 			 #articleShortContent#,
 			 #articleContent#,
 			 #articleSortId#,
 			 curdate(),
 			 now(),
 			 now(),
 			 0)
 	</insert>

    <insert id="insertMusics" parameterClass="map" >
        <![CDATA[
 			insert into rebirth.music_message
 			(name,
 			 music_type,
 			 create_time,
 			 update_time,
 			 version)
 			VALUES
 			(#name#,
 			#musicType#,
 			now(),
 			now(),
 			0)
 		]]>
    </insert>

    <select id="getMusicTotalCount" parameterClass="map" resultClass="int">
        <![CDATA[
          select count(1)
          from rebirth.music_message
          where music_type = #musicType#
        ]]>
    </select>

    <select id="getMusicNameByNumber" parameterClass="map" resultClass="String">
        select name
        from rebirth.music_message
        where music_type = #musicType#
        order by id
        limit #number#,1

    </select>

 </sqlMap>


